(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8130:function(e,n,t){"use strict";t(7294);var r=t(1508),i=t(9062),s=t(5893);n.Z=function(){return(0,s.jsx)(r.Z,{sx:{display:"flex",height:"100%"},children:(0,s.jsx)(i.Z,{sx:{m:"auto"}})})}},6658:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var r=t(7294),i=t(4065),s=t(1508),o=t(5725),c=t(5152),a=t(8130),l=t(2982),u=t(885),x=t(6501),d=t(6091),f=t(2116),h=t(6867),m=t(6307),j=t(2658),Z=t(6096),p=t(2538),g=t(2440),v=t(799),b=t(8584),P=t(5893),w=function(){var e=r.useRef(""),n=r.useRef(""),t=r.useState([]),i=(0,u.Z)(t,2),s=i[0],c=i[1];r.useEffect((function(){Z.Z.on("CHAT",(function(e){console.log("chat msg",e),s.push(e),c((0,l.Z)(s))}))}),[]);var a=r.useRef(null);r.useEffect((function(){!function(){var e;null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}()}),[s]);return(0,P.jsx)(x.Z,{component:"form",sx:{height:450},onSubmit:function(t){t.preventDefault();var r=e.current.value,i=n.current.value;Z.Z.emit("CHAT",{message:r,name:i}),e.current.value=""},children:(0,P.jsxs)(o.ZP,{container:!0,sx:{height:"100%"},children:[(0,P.jsx)(o.ZP,{item:!0,xs:12,sx:{height:50,textAlign:"center",bgcolor:"primary.main",p:1,borderRadius:2},children:(0,P.jsx)(j.Z,{variant:"h6",component:"div",color:"#ffff",children:"Centro de control"})}),(0,P.jsx)(o.ZP,{item:!0,xs:12,sx:{height:"65%",overflowX:"hidden",overflowWrap:"break-word"},children:(0,P.jsxs)(g.Z,{sx:{overflowY:"auto",p:1},children:[s.map((function(e,t){var r=function(){return e.name===n.current.value},i=r()?"right":"left",s=r()?"left":"right",c=r()?"You":e.name;return(0,P.jsx)(v.ZP,{sx:{bgcolor:"#f3f3f3",mb:2,borderRadius:2},children:(0,P.jsxs)(o.ZP,{container:!0,children:[(0,P.jsx)(o.ZP,{item:!0,xs:12,children:(0,P.jsx)(b.Z,{align:i,secondary:c})}),(0,P.jsx)(o.ZP,{item:!0,xs:12,children:(0,P.jsx)(b.Z,{sx:{maxWidth:"100%"},align:i,primary:e.message})}),(0,P.jsx)(o.ZP,{item:!0,xs:12,children:(0,P.jsx)(b.Z,{align:s,secondary:new Date(e.date).toLocaleTimeString("cl-CL",{hour12:!1})})})]})},t)})),(0,P.jsx)("div",{ref:a})]})}),(0,P.jsx)(o.ZP,{item:!0,xs:12,children:(0,P.jsx)(p.Z,{inputRef:n,fullWidth:!0,label:"Nickname",variant:"outlined"})}),(0,P.jsxs)(o.ZP,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",p:1},children:[(0,P.jsx)(d.ZP,{autoFocus:!0,sx:{ml:1,flex:1},placeholder:"Type a message",inputProps:{"aria-label":"send message"},inputRef:e}),(0,P.jsx)(f.Z,{sx:{height:28,m:.5},orientation:"vertical"}),(0,P.jsx)(h.Z,{type:"submit",color:"primary",sx:{p:"10px"},"aria-label":"send",children:(0,P.jsx)(m.Z,{})})]})]})})},k=t(4140);function _(){r.useEffect((function(){var e=(0,k.$j)("wss://tarea-3-websocket.2021-2.tallerdeintegracion.cl",{path:"/trucks"});if(e.emit("TRUCKS"),e.on("TRUCKS",(function(e){console.log("trucks",e)})),e)return function(){return e.disconnect()}}),[]);var e=(0,c.default)((function(){return Promise.all([t.e(269),t.e(937)]).then(t.bind(t,9937))}),{ssr:!1,loading:function(){return(0,P.jsx)(a.Z,{})},loadableGenerated:{webpack:function(){return[9937]},modules:["index.js -> ../components/Map"]}});return(0,P.jsx)(i.Z,{sx:{mt:8},maxWidth:"lg",children:(0,P.jsxs)(o.ZP,{container:!0,spacing:3,children:[(0,P.jsx)(o.ZP,{item:!0,xs:12,md:7,children:(0,P.jsx)(e,{})}),(0,P.jsx)(o.ZP,{item:!0,xs:12,md:5,children:(0,P.jsx)(w,{})}),(0,P.jsx)(o.ZP,{item:!0,xs:12,sx:{height:"30vh"},children:(0,P.jsx)(s.Z,{sx:{bgcolor:"primary.main",height:"30vh",width:"100%"},children:"a"})})]})})}},6096:function(e,n,t){"use strict";var r=(0,t(4140).$j)("wss://tarea-3-websocket.2021-2.tallerdeintegracion.cl",{path:"/trucks"});r.on("connect",(function(){console.log("SOCKET CONNECTED!",r.id)})),n.Z=r},8581:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6658)}])}},function(e){e.O(0,[774,457,888,179],(function(){return n=8581,e(e.s=n);var n}));var n=e.O();_N_E=n}]);